<% include ../partials/header %>
<div class = "container-fluid text-center" style = "margin-top: 100px;">
    <h1 class = "student-title">All Entries</h1>
</div>

<div class = "container text-center student-list">
    <div class="ui fluid search selection dropdown">
        <input type="hidden" name="country">
        <i class="dropdown icon"></i>
        <div class="default text">Select student</div>
        <div class="menu">
            <% students.forEach(function(student) { %>
                <a class="item" href="/students/<%=student._id%>">
                    <%= student.name.first %> <%= student.name.last %>
                </a>
            <% }); %>
            
        </div>
    </div>
</div>


<!-- Semantic UI table-->
<div class = "container-fluid" style = "width: 60%; padding-top: 10px; margin-top: 10px;">
    <table class="ui striped large celled blue table">
        <thead>
            <tr class = "text-center" style = "font-size: 110%;">
                <th>Name</th>
                <th>Class</th>
                <th>Latest entry</th>
            </tr>
        </thead>
        <tbody>
            <% students.forEach(function(student) { %>
                <% if (student.entries.length > 0) { %>
                    <tr>
                        <% var latest_entry = student.entries[student.entries.length - 1] %>
                        <td>
                            <a  href="/students/<%=student._id%>">
                                <%=student.name.first%> <%=student.name.last %> 
                            </a>
                            
                        </td>
                        <td><%=latest_entry.class_name%></td>
                        <td>
                            <% if (latest_entry.summary.length > 100) { %>
                                <%= latest_entry.summary.substring(0,100) %>...
                            <% } else { %>
                                <%=latest_entry.summary %>
                            <% } %>
                        </td>
                    </tr>
                <% } %>
            <% }); %>
        </tbody>
    </table>
</div>


<% include ../partials/footer %>